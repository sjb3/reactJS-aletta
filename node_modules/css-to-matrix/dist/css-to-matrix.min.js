function a(a){this.model=new umodel({matrix:new matrixUtilities.Identity,transformations:{perspective:new matrixUtilities.Identity,rotate:new matrixUtilities.Identity,scale:new matrixUtilities.Identity,skew:new matrixUtilities.Identity,translate:new matrixUtilities.Identity}}),a&&this.matrix(a)}var b={rad:function(a){if("string"==typeof a){var b=parseFloat(a,10),c=a.indexOf("deg")>-1;return c&&(b*=Math.PI/180),b}return a},extend:function(a,b){for(var c in b)a[c]=b[c];return a},fluent:function(a){return function(){return a.apply(this,arguments),this}},isNumber:function(a){return"number"==typeof a}};b.extend(a.prototype,{matrix:function(a){if(null==a.length)throw new TypeError("expected parameter `data` to be an Array, but was given a "+typeof a);var b=a.length,c=b>0?b:0;if(4!==b||4!==c)throw new Error("expected parameter `data` to be a 4x4 matrix of arrays, but was given a "+b+"x"+c+" matrix");this.model.set("matrix",a)},getMatrix:function(){var a=this.model.get("matrix"),b=this.model.get("transformations");return a=matrixUtilities.multiply(a,b.perspective),a=matrixUtilities.multiply(a,b.translate),a=matrixUtilities.multiply(a,b.rotate),a=matrixUtilities.multiply(a,b.skew),a=matrixUtilities.multiply(a,b.scale),matrixUtilities.flip(a)},getMatrixCSS:function(){return"matrix3d("+this.getMatrix().reduce(function(a,b){return a.push.apply(a,b),a},[]).join(",")+")"},rotate:function(a){return this.rotateZ(a)},rotateX:function(a){return this.rotate3d(1,0,0,a)},rotateY:function(a){return this.rotate3d(0,1,0,a)},rotateZ:function(a){return this.rotate3d(0,0,1,a)},scale:function(a,b){return this.scale3d(a,b)},scaleX:function(a){return this.scale3d(a)},scaleY:function(a){return this.scale3d(null,a)},scaleZ:function(a){return this.scale3d(null,null,a)},skewX:function(a){return this.skew(a)},skewY:function(a){return this.skew(null,a)},translate:function(a,b){return this.translate3d(a,b)},translateX:function(a){return this.translate3d(a)},translateY:function(a){return this.translate3d(null,a)},translateZ:function(a){return this.translate3d(null,null,a)},perspective:b.fluent(function(a){if(null==a&&(a=0),!b.isNumber(a))throw new TypeError("expected parameter `x` to be a Number, but was given a "+typeof a);this.model.set("transformations/perspective",transformToMatrix.perspective(a))}),rotate3d:b.fluent(function(a,c,d,e){if(null==a&&(a=0),null==c&&(c=0),null==d&&(d=0),null==e&&(e=0),!b.isNumber(a))throw new TypeError("expected parameter `x` to be a Number, but was given a "+typeof a);if(!b.isNumber(c))throw new TypeError("expected parameter `y` to be a Number, but was given a "+typeof c);if(!b.isNumber(d))throw new TypeError("expected parameter `z` to be a Number, but was given a "+typeof d);this.model.set("transformations/rotate",transformToMatrix.rotate3d(a,c,d,b.rad(e)))}),scale3d:b.fluent(function(a,c,d){if(null==a&&(a=1),null==c&&(c=1),null==d&&(d=1),!b.isNumber(a))throw new TypeError("expected parameter `x` to be a Number, but was given a "+typeof a);if(!b.isNumber(c))throw new TypeError("expected parameter `y` to be a Number, but was given a "+typeof c);if(!b.isNumber(d))throw new TypeError("expected parameter `z` to be a Number, but was given a "+typeof d);this.model.set("transformations/scale",transformToMatrix.scale3d(a,c,d))}),skew:b.fluent(function(a,c){null==a&&(a=0),null==c&&(c=0),this.model.set("transformations/skew",matrixUtilities.to3d(transformToMatrix.skew(b.rad(a),b.rad(c))))}),translate3d:b.fluent(function(a,c,d){if(null==a&&(a=0),null==c&&(c=0),null==d&&(d=0),!b.isNumber(a))throw new TypeError("expected parameter `x` to be a Number, but was given a "+typeof a);if(!b.isNumber(c))throw new TypeError("expected parameter `y` to be a Number, but was given a "+typeof c);if(!b.isNumber(d))throw new TypeError("expected parameter `z` to be a Number, but was given a "+typeof d);this.model.set("transformations/translate",transformToMatrix.translate3d(a,c,d))})});